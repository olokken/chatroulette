{"version":3,"sources":["components/LoginCard/LoginCard.js","containers/Login.js","components/OnlineUsers/OnlineUsers.js","components/Chatbox/Chatbox.js","containers/Chat.js","Routes.js","App.js","index.js"],"names":["LoginCardContainer","styled","div","LoginCard","props","TextField","style","width","marginBottom","label","onChange","variant","Button","color","onClick","onLogin","LoginContainer","Login","useState","username","setUsername","setAuthState","useContext","AuthContext","history","useHistory","push","event","target","value","StyledDiv","StyledUsers","input","StyledUserCard","OnlineUsers","users","onUserClick","placeholder","marginTop","marginLeft","minHeight","map","user","name","id","Container","StyledMessages","StyledMessagesPeer","StyledSendMessage","StyledMessageContainer","StyledChat","StyledHeader","h2","checkMessage","message","index","yours","console","log","chatbox","messages","text","handleChange","sendMessage","Grid","className","container","item","md","background","Chat","setUsers","authState","sendChannel","useRef","socket","peerRef","otherUser","setText","setMessages","useEffect","current","io","transports","on","emit","filter","romInfo","from","window","confirm","userID","createPeer","createDataChannel","onopen","handleOnOpen","onmessage","handleReceiveMessage","setRoom","romID","handleOffer","handleAnswer","handleNewICECandidateMsg","toUser","uuid","createRoom","peer","RTCPeerConnection","iceServers","urls","onicecandidate","handleICECandidateEvent","onnegotiationneeded","createOffer","then","offer","setLocalDescription","payload","caller","sdp","localDescription","catch","e","handleNegotiationNeededEvent","data","incoming","ondatachannel","channel","desc","RTCSessionDescription","setRemoteDescription","createAnswer","answer","candidate","RTCIceCandidate","addIceCandidate","Chatbox","length","send","exact","path","component","createContext","App","Provider","Routes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.71532141.chunk.js","sourcesContent":["import React from 'react';\nimport { TextField, Button } from '@material-ui/core';\nimport styled from 'styled-components';\n\n\nconst LoginCardContainer = styled.div`\n  width: 30rem;\n  height: 28rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  padding: 3rem;\n  border-radius: 8px;\n`;\n\nconst LoginCard = props => {\n  return (\n    <LoginCardContainer>\n      <h1>Login</h1>\n      <hr />\n      <TextField\n        style={{ width: '100%', marginBottom: 24 }}\n        label=\"Username\"\n        onChange={props.onChange}\n        variant=\"outlined\"\n      />\n      <Button\n        style={{ width: '100%' }}\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onLogin}\n      >\n        Enter chat room\n      </Button>\n    </LoginCardContainer>\n  );\n};\n\nexport default LoginCard;\n","import React, {useState, createContext, useContext} from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport LoginCard from '../components/LoginCard/LoginCard';\nimport { AuthContext } from '../App';\n\nconst LoginContainer = styled.div`\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\n\nconst Login = () => {\n  const [username, setUsername] = useState(''); \n  const {setAuthState} = useContext(AuthContext); \n  const history = useHistory();\n\n  const onChange = (event) => {\n    setUsername(event.target.value);\n  }\n\n  const onLogin = () => {\n    setAuthState({username: username}); \n    history.push('/chat');\n  }\n\n\n\n  return (\n    <LoginContainer>\n      <LoginCard onLogin = {onLogin} onChange = {onChange}></LoginCard>\n    </LoginContainer>\n  );\n};\n\nexport default Login;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { TextField } from '@material-ui/core';\n\nconst StyledDiv = styled.div`\n  //border-right: ridge grey 1px;\n  min-width: 60%;\n  min-height: 100%;\n  border-radius: 0px;\n`;\n\nconst StyledSearchBar = styled.input`\n  min-height: 25px;\n  min-width: 250px;\n  display: block;\n  margin: auto;\n  margin-top: 15px;\n  border-radius: 50px;\n`;\n\nconst StyledUsers = styled.div`\n  margin-top: 20px;\n  padding:6px;\n  margin:10px;\n  \n`;\n\nconst StyledUser = styled.div`\n  background-color: black;\n  width: 100px;\n`;\n\nconst StyledUserCard = styled.div`\n  width: wrap;\n  margin: 4px;\n  padding-left: 5px;\n  user-select: none;\n  &:hover{\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n    box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n    border-radius:10px;\n  } ;\n  &:active{\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.6);\n    box-shadow: inset 0 0 6px rgba(0,0,0,0.6);\n  }\n`;\n\nconst OnlineUsers = ({users, onUserClick}) => {\n  return (\n    <StyledDiv>\n      <TextField\n        placeholder=\"Search\"\n        style={{\n          width: '80%',\n          marginTop: '5px',\n          marginLeft: '3px',\n          minHeight: '20px',\n          color: 'white'\n        }}\n      ></TextField>\n      <StyledUsers>\n       <b>Brukerne:</b> <br></br>\n        {users.map(user => (\n          <StyledUserCard key={user.id} onClick={() => onUserClick(user)}>{user.name}</StyledUserCard>\n        ))}\n      </StyledUsers>\n    </StyledDiv>\n  );\n};\n\nexport default OnlineUsers;\n","import React from 'react';\nimport styled from 'styled-components';\nimport OnlineUsers from '../OnlineUsers/OnlineUsers';\nimport { TextField, Button, Grid } from '@material-ui/core';\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 100%;\n`;\n\nconst StyledOwnMessages = styled.div`\n  position: right;\n  width: 70%;\n  height: relative;\n  background-color: white;\n  margin: 3px;\n`;\n\nconst StyledMessages = styled.div`\n  position: left;\n  float:right;\n  width: 50%;\n  height: relative;\n  padding: 5px;\n  background-color: none;\n  margin: 3px;\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n`;\n\nconst StyledMessagesPeer = styled.div`\n  position: left;\n  float:left;\n  width: 50%;\n  height: relative;\n  padding: 5px;\n  background-color: blue;\n  margin: 3px;\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n`; \n\nconst StyledSendMessage = styled.div``;\nconst StyledLable = styled.div`\n  font-size: small;\n`;\n\nconst StyledMessageContainer = styled.div`\n  color: white;\n  width: 100%;\n  height: 40vh;\n  overflow: hidden;\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    width: 20px;\n  }\n  ::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n    border-radius: 10px;\n  }\n`;\n\nconst StyledChat = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 80%;\n  padding: 3rem;\n`;\n\nconst StyledHeader = styled.h2`\n  text-align: left;\n  margin: 0px;\n  color: white;\n`;\n\n\n\nfunction checkMessage(message, index){\n    if(message.yours) {\n      console.log(\"min melding\")\n      return (<StyledMessages key={index}>{message.value}</StyledMessages>)\n    } else {\n      return (<StyledMessagesPeer key = {index}>{message.value\n      }</StyledMessagesPeer>)\n    }\n  }\n\nconst chatbox = ({users, messages, text, onUserClick, handleChange, sendMessage}) => {\n  return (\n    <Container>\n      <Grid className=\"h100\" container>\n        <Grid item md={4}>\n          <OnlineUsers users={users} onUserClick={user => onUserClick(user)} />\n        </Grid>\n        <Grid item md={8}>\n          <StyledChat>\n            <StyledHeader>\n              <p>Skriv inn din melding</p>\n            </StyledHeader>\n            <StyledMessageContainer>\n              {messages.map(checkMessage)}\n            </StyledMessageContainer>\n            <StyledSendMessage>\n              <TextField\n                style={{ width: '100%', marginBottom: 24, background: '#fff' }}\n                label=\"ENTER MESSAGE\"\n                variant=\"outlined\"\n                value = {text}\n                onChange = {handleChange}\n              />\n              <Button\n                style={{ width: '100%' }}\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick= {sendMessage}\n              >\n                Send Message\n              </Button>\n            </StyledSendMessage>\n          </StyledChat>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default chatbox;\n","import { useForkRef } from '@material-ui/core';\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport io from 'socket.io-client';\nimport { AuthContext } from '../App';\nimport Chatbox from '../components/Chatbox/Chatbox';\nimport { v1 as uuid } from 'uuid';\nimport { useHistory } from 'react-router-dom';\n\n//import axios from 'axios';\n\nconst Chat = () => {\n  const history = useHistory();\n  const [users, setUsers] = useState([]);\n  const { authState } = useContext(AuthContext);\n  const sendChannel = useRef();\n  const socket = useRef();\n  const peerRef = useRef();\n  const otherUser = useRef();\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    socket.current = io('/', {\n      transports: ['websocket', 'polling']\n    });\n\n    socket.current.on('connect', () => {\n      socket.current.emit('username', authState.username);\n    });\n\n    socket.current.on('users', users => {\n      setUsers(users);\n      console.log(users);\n    });\n\n    socket.current.on('connected', user => {\n      console.log(user.name + ' conneceted');\n    });\n\n    socket.current.on('disconnected', id => {\n      console.log(id);\n      setUsers(users => {\n        return users.filter(user => user.id !== id);\n      });\n    });\n\n    socket.current.on('romInvitasjon', romInfo => {\n      setRoom(romInfo.romID, romInfo.from);\n    });\n\n    socket.current.on('offer', handleOffer);\n\n    socket.current.on('answer', handleAnswer);\n\n    socket.current.on('ice-candidate', handleNewICECandidateMsg);\n  }, []);\n\n  const onUserClick = toUser => {\n    if (toUser.id !== socket.current.id) {\n      otherUser.current = toUser.id;\n      console.log('USER CLCKED', toUser);\n      let romID = createRoom();\n      const romInfo = {\n        target: toUser.id,\n        from: socket.current.id,\n        romID: romID\n      };\n      socket.current.emit('roomID', romInfo);\n    } else {\n      console.log('Du kan ikke snakke med deg selv');\n    }\n  };\n\n  function createRoom() {\n    const id = uuid();\n    history.push(`/chat/${id}`);\n    return id;\n  }\n\n  function setRoom(id, from) {\n    let vilSnakke = window.confirm('Vil du snakke med' + from);\n    if (vilSnakke) {\n      otherUser.current = from;\n      history.push(`/chat/${id}`);\n      startSamtale(from);\n    }\n  }\n\n  function startSamtale(userID) {\n    console.log('1: Starter samtale');\n    peerRef.current = createPeer(userID);\n    sendChannel.current = peerRef.current.createDataChannel('sendChannel');\n    console.log(\"Jeg oppretter connection\");\n    sendChannel.current.onopen = handleOnOpen;\n    sendChannel.current.onmessage = handleReceiveMessage;\n  }\n\n  function handleOnOpen() {\n    console.log('onopen');\n    console.log(sendChannel.current);\n  }\n\n  function createPeer(userID) {\n    console.log('2: Lager peer med id ' + userID);\n    const peer = new RTCPeerConnection({\n      iceServers: [\n        {\n          urls: 'stun:stun.stunprotocol.org'\n        }\n      ]\n    });\n    peer.onicecandidate = handleICECandidateEvent;\n    peer.onnegotiationneeded = () => handleNegotiationNeededEvent(userID);\n    console.log(peer);\n    return peer;\n  }\n\n  function handleReceiveMessage(e) {\n    setMessages(messages => [...messages, { yours: false, value: e.data }]);\n  }\n\n  function sendMessage() {\n    if (text.length) {\n      sendChannel.current.send(text);\n      setMessages(messages => [...messages, { yours: true, value: text }]);\n      setText('');\n    }\n  }\n\n  function handleNegotiationNeededEvent(userID) {\n    peerRef.current\n      .createOffer()\n      .then(offer => {\n        return peerRef.current.setLocalDescription(offer);\n      })\n      .then(() => {\n        const payload = {\n          target: userID,\n          caller: socket.current.id,\n          sdp: peerRef.current.localDescription\n        };\n        socket.current.emit('offer', payload);\n      })\n      .catch(e => console.log(e));\n  }\n\n  function handleOffer(incoming) {\n    console.log(\"6: offer\");\n    peerRef.current = createPeer();\n    peerRef.current.ondatachannel = (event) => {\n      console.log(\"plis\")\n      sendChannel.current = event.channel;\n      sendChannel.current.onopen = handleOnOpen;\n      sendChannel.current.onmessage = handleReceiveMessage;\n    };\n    const desc = new RTCSessionDescription(incoming.sdp);\n    peerRef.current\n      .setRemoteDescription(desc)\n      .then(() => {})\n      .then(() => {\n        return peerRef.current.createAnswer();\n      })\n      .then(answer => {\n        return peerRef.current.setLocalDescription(answer);\n      })\n      .then(() => {\n        const payload = {\n          target: incoming.caller,\n          caller: socket.current.id,\n          sdp: peerRef.current.localDescription\n        };\n        socket.current.emit('answer', payload);\n      });\n  }\n\n  function handleAnswer(message) {\n    const desc = new RTCSessionDescription(message.sdp);\n    peerRef.current.setRemoteDescription(desc).catch(e => console.log(e));\n    console.log('Skal vÃ¦re koblet sammen');\n  }\n\n  function handleICECandidateEvent(e) {\n    if (e.candidate) {\n      console.log(\"4 er kandidat\")\n      const payload = {\n        target: otherUser.current,\n        candidate: e.candidate\n      };\n      console.log(payload.target);\n      socket.current.emit('ice-candidate', payload);\n    }\n  }\n\n  function handleNewICECandidateMsg(incoming) {\n    const candidate = new RTCIceCandidate(incoming);\n    console.log(\"5 : \" + candidate);\n    peerRef.current.addIceCandidate(candidate).catch(e => console.log(e));\n  }\n\n  function handleChange(e) {\n    setText(e.target.value);\n  }\n\n  return (\n    <Chatbox\n      users={users}\n      messages={messages}\n      text={text}\n      onUserClick={user => onUserClick(user)}\n      handleChange={e => handleChange(e)}\n      sendMessage = {sendMessage}\n    />\n    \n  );\n};\n\nexport default Chat;\n","import React from 'react';\nimport { Route, Switch } from 'react-router';\nimport Login from './containers/Login';\nimport Chat from './containers/Chat';\n\nexport default (\n  <Switch>\n    <Route exact path=\"/\" component={Login} />\n    <Route exact path=\"/chat\" component={Chat} />\n    <Route exact path=\"/chat/:roomID\" component={Chat} />\n  </Switch>\n);\n","import React , { useState, createContext }from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport './App.css';\nimport Routes from './Routes';\n\nexport const AuthContext = createContext({\n  authState: null,\n  setAuthState: () => {}\n  });\n\nfunction App() {\n  const [authState, setAuthState] = useState({username: null}); \n\n  return (\n    <BrowserRouter >\n      <div className=\"App\">\n        <AuthContext.Provider value={{authState, setAuthState}}>{Routes}</AuthContext.Provider>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}